import{r,j as e,H as j,P as b,a as p,S as f}from"./index-X1niyO1E.js";const P=({lesson:a,viewPreferences:t={},onZoomChange:x,onPageChange:c,onSelectionAction:s})=>{var m;const[d,h]=r.useState(null),[w,i]=r.useState(!0),n=a.contentUrl||((m=a.source)==null?void 0:m.url)||a.fileUrl;r.useCallback(({numPages:l})=>{h(l),i(!1)},[]),r.useCallback(l=>{console.error("PDF load error:",l),i(!1)},[]);const u=r.useCallback(l=>{console.log("PDF text selected:",l)},[]),o=r.useCallback(l=>{s==null||s({type:"chat",text:l,lessonId:a.id})},[a.id,s]),g=r.useCallback(l=>{s==null||s({type:"flashcard",text:l,lessonId:a.id})},[a.id,s]);return n?e.jsx(j,{lessonId:a.id,children:e.jsx("div",{className:"flex flex-col h-full",children:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(b,{pdfUrl:n,lessonId:a.id,initialPage:t.currentPage||1,onTextSelected:u,onSendToChat:o,onCreateFlashcards:g})})})}):e.jsx(N,{lesson:a,onSelectionAction:s})},N=({lesson:a,onSelectionAction:t})=>{var x,c,s;return e.jsx("div",{className:"flex-1 overflow-auto p-6 bg-white",children:e.jsxs(p,{lessonId:a.id,contentType:"html",onSelectionAction:t,children:[e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“„"}),e.jsx("p",{className:"font-medium text-sm",children:"The original PDF isn't available, but here's the lesson content!"})]})}),a.rawText&&e.jsx("div",{className:"prose prose-lg max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:a.rawText})}),!a.rawText&&((x=a.content)==null?void 0:x.summary)&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl mb-3",children:"Summary"}),e.jsx("p",{className:"text-gray-700",children:a.content.summary})]}),(s=(c=a.content)==null?void 0:c.chapters)==null?void 0:s.map((d,h)=>e.jsxs("div",{className:"border-l-4 border-nanobanana-blue pl-4",children:[e.jsx("h4",{className:"font-bold text-lg mb-2",children:d.title}),e.jsx("p",{className:"text-gray-700",children:d.content})]},d.id||h))]})]}),e.jsx(f,{})]})})};export{P as default};
